# 替换空格
____

## 题目描述

请实现一个函数，将一个字符串中的每个空格替换成 %20。例如，当字符串为 We Are Happy，则经过替换之后的字符串为 We%20Are%20Happy。

目的是为了将URL参数中的特殊字符转化成服务器端可以正确识别的字符。即%+ASCII码的两位十六进制表示。
____

## 测试用例

1. 输入的字符串包含空格（空格位于字符串的最前面/最后面/中间；字符串有多个连续的空格）；
2. 输入的字符串中没有空格；
3. 特殊输入测试（字符串是一个空指针；字符串是一个空字符串；字符串只有一个空格字符；字符串中有多个连续空格）。

____

## 解法

### v-0.00

直观想法是新建一个字符串，依次遍历，碰到一个空格换一次。

**注**：**"%20"是3个字符**

### v-0.01

另一个想法是看了剑指offer才发现的，就是字符串的储存类型，如果是数组储存的，那么就可以考虑原地置换，如果是指针类型的，那么只能新建数组。

这里简单说说原地置换的思路。

原地置换需要字符串的储存类型是数组形式的，即字符串的字符长度小于数组长度。

![v-0.01](/pic/v-0.01.png)
{% asset_img v-0.01.png v-0.01 %}

即先计算所需要的长度，然后从后向前两个指针来进行替换。

**注**：**原地操作的从后往前一次操作可以代替原地操作的多次从前向后操作。**

### v-0.02

这个方案是github给的，是强行结合原地操作的从后往前操作和新建字符串操作。事实上，如果新建一个字符串，那么从后往前和从前往后的操作次数是一样的。

先计算清楚空格数量，然后直接建立更大的字符串。
_____

## 2.3.2 字符串

**String, StringBuffer, StringBuilder**:

字符串需要考虑是指针指向还是数组容纳，或者说是值类型还是引用类型。

用指针定义的字符串存储在**常量区(堆)**，是**引用类型**，不允许就地修改，而用数组定义的字符串是在**栈中**，是**值类型**，允许就地修改。

在修改字符串时，是新生成一个字符串并重新指向（引用类型）。

如果需要多次修改String，会生成多个字符串实例，可以考虑StringBuilder.

java中，String 是不可修改的，StringBuffer是可修改的，效率低，线程安全，StringBuilder也是可修改的，效率高，线程不安全。

但是还是有问题，为什么String不直接设置成可变大小的？是出于什么的考虑？还专门拿出StringBuilder？

在java中，可以使用 StringBuilder 实现动态长度字符串；

在python中，可以使用list实现动态长度字符串，其实也可以耍流氓，把str变成list，然后行从后往前的原地操作。

想了一天，觉得应该这么理解，字符串属于不可变对象，意味每次的修改就是重新生成并赋值，而int等是可变对象，每次的修改是直接修改。同时也想清楚了为什么字符串设计成不可变对象，可以这么理解，类似list等都是引用对象，最后都是指向字符串，那么对list内某个值的修改如果是就地修改，那么所有指向这个值的引用都会发生变化，而如果是重新生成并赋值，就不会其他指向这个值的正常引用。

所以字符串是特殊的不可变对象。

以上只是我的暂时的个人理解，能够解释通目前碰到的情况。